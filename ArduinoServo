#include <Servo.h>
int phasePin = 3;
int quadratureA = 8;
int quadratureB = 9;
int enablePin = 5;

void setup() {
  // put your setup code here, to run once:
  pinMode(phasePin, OUTPUT);
  pinMode(quadratureA,INPUT);
  pinMode(quadratureB,INPUT);
  pinMode(enablePin, OUTPUT);
  Serial.begin(9600);
  pinMode(LED_BUILTIN,OUTPUT);

  Servo myServo;
  myServo.attach(5);
  myServo.write(90);
  delay(500);
  myServo.write(0);
  delay(500);
  myServo.write(90);
  delay(500);
  myServo.write(180);
  delay(500);
  myServo.write(90);
  delay(500);

}

void loop() {
  // put your main code here, to run repeatedly:
  while (Serial.available()>0) {
    analogWrite(enablePin, 100); // This is a pwm signal to determine the speed of the servo motor. Range is 0 to 255
    // digitalWrite(phasePin, HIGH) // This dictates the direction of the motor
    int stateA = digitalRead(quadratureA);
    int stateB = digitalRead(quadratureB);
    Serial.print(stateA, " " );
    Serial.print(stateB, "\n");

    
    String incomingbyte = Serial.readStringUntil('\n');
    Serial.println(incomingbyte);
    if (incomingbyte.equals("on")){
      Serial.println("LED is ON");
      digitalWrite(LED_BUILTIN, HIGH);
  } else if(incomingbyte.equals("off")){
      Serial.println("LED is OFF");
      digitalWrite(LED_BUILTIN, LOW);
  }
  }
}
